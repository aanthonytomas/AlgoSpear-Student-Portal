import{d as C,i as _,_ as P,c as g,e as f,a as e,f as p,m as $,v as u,y as c,k as D,g as b,j as N,w as U,o as h}from"./index-BI8-wN6e.js";import{S as V}from"./config-Cif4XynF.js";import{q}from"./insertGetID-Brze0Scj.js";import{S as M,a as k}from"./SectionFooter-DD-S-wB-.js";function A(t){var s=3;let n="";const a="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",i=a.length;let l=0;for(;l<s;)n+=a.charAt(Math.floor(Math.random()*i)),l+=1;var r=new Date,d=r.getFullYear(),m=r.getMonth()+1,o=r.getDate(),y=r.getHours(),w=r.getMinutes(),v=r.getSeconds(),S=d+""+m+o+y+w+v;return t+"-"+S+"-"+n}async function F({firstname:t,lastname:s,email:n,password:a,confirm_password:i,created_by:l}){return new Promise(async r=>{if(t=="")return r({success:!1,message:"First name is required"});if(s=="")return r({success:!1,message:"Last name is required"});if(n=="")return r({success:!1,message:"Please provide email"});if(a=="")return r({success:!1,message:"Please provide default password"});if(i=="")return r({success:!1,message:"Please confirm your password"});if(a!==i)return r({success:!1,message:"Password doesn't match"});var d=A("STD");await q({connection:V().CONN_NPM_LMS,table:"users_student",columns:{user_refid:d,firstname:t,lastname:s,email:n,password:a,created_by:l}}).then(async m=>r(m))})}const T=C({name:"SignUpPage",components:{SectionFooter:k,SectionHeader:M},data(){return{loading:!1,form:{email:"",password:"",confirm_password:"",firstname:"",lastname:"",created_by:""}}},methods:{resetData(){this.form.email="",this.form.firstname="",this.form.lastname="",this.form.created_by="",this.form.password="",this.form.confirm_password=""},async register(){if(this.form.password!==this.form.confirm_password){this.$toast.warning("Passwords do not match");return}if(this.form.email.length<5){this.$toast.warning("Username must be at least 5 characters");return}this.loading=!0;try{const t=await F(this.form);t.success?(this.resetData(),this.$toast.success((t==null?void 0:t.message)||"Account created successfully"),setTimeout(()=>{this.$router.push("/login")},1500)):this.$toast.warning((t==null?void 0:t.message)||"Registration failed")}catch(t){this.$toast.error("An error occurred while creating your account"),console.error(t)}finally{this.loading=!1}}},async mounted(){_()&&this.$router.replace("/")}}),H={class:"auth-wrapper"},I={class:"main py-5"},L={class:"auth-container mt-5"},x={class:"card mt-5 border-0"},B={class:"card-body p-5"},E={class:"auth-form"},R={class:"row"},G={class:"col-md-6 mb-4"},O={class:"col-md-6 mb-4"},Y={class:"mb-4"},j={class:"input-group"},J={class:"mb-4"},K={class:"input-group"},Q={class:"mb-4"},W={class:"input-group"},X={class:"d-grid gap-2 mt-4"},Z=["disabled"],z={key:0,class:"spinner-border spinner-border-sm me-2",role:"status"},ss={class:"text-center mt-4"};function es(t,s,n,a,i,l){const r=p("SectionHeader"),d=p("router-link"),m=p("SectionFooter");return h(),g("div",H,[f(r),e("main",I,[e("div",L,[e("div",x,[e("div",B,[e("div",E,[s[18]||(s[18]=e("div",{class:"text-center mb-4"},[e("h1",{class:"display-6 fw-bold"},"AlgoSpear"),e("p",{class:"text-muted"},"Create your account")],-1)),e("form",{onSubmit:s[5]||(s[5]=$((...o)=>t.register&&t.register(...o),["prevent"]))},[e("div",R,[e("div",G,[s[6]||(s[6]=e("label",{class:"form-label"},"First Name",-1)),u(e("input",{"onUpdate:modelValue":s[0]||(s[0]=o=>t.form.firstname=o),class:"form-control form-control-lg",type:"text",placeholder:"Enter your first name",required:""},null,512),[[c,t.form.firstname]])]),e("div",O,[s[7]||(s[7]=e("label",{class:"form-label"},"Last Name",-1)),u(e("input",{"onUpdate:modelValue":s[1]||(s[1]=o=>t.form.lastname=o),class:"form-control form-control-lg",type:"text",placeholder:"Enter your last name",required:""},null,512),[[c,t.form.lastname]])])]),e("div",Y,[s[9]||(s[9]=e("label",{class:"form-label"},"Username",-1)),e("div",j,[s[8]||(s[8]=e("span",{class:"input-group-text bg-light border-end-0"},[e("i",{class:"bi bi-person"})],-1)),u(e("input",{"onUpdate:modelValue":s[2]||(s[2]=o=>t.form.email=o),class:"form-control form-control-lg border-start-0",type:"text",placeholder:"Choose a username (min. 5 characters)",required:""},null,512),[[c,t.form.email]])]),s[10]||(s[10]=e("small",{class:"text-muted"},"Username must be at least 5 characters",-1))]),e("div",J,[s[12]||(s[12]=e("label",{class:"form-label"},"Password",-1)),e("div",K,[s[11]||(s[11]=e("span",{class:"input-group-text bg-light border-end-0"},[e("i",{class:"bi bi-lock"})],-1)),u(e("input",{"onUpdate:modelValue":s[3]||(s[3]=o=>t.form.password=o),class:"form-control form-control-lg border-start-0",type:"password",placeholder:"Create a password",required:""},null,512),[[c,t.form.password]])]),s[13]||(s[13]=e("small",{class:"text-muted"},"Password must be at least 8 characters",-1))]),e("div",Q,[s[15]||(s[15]=e("label",{class:"form-label"},"Confirm Password",-1)),e("div",W,[s[14]||(s[14]=e("span",{class:"input-group-text bg-light border-end-0"},[e("i",{class:"bi bi-lock-fill"})],-1)),u(e("input",{"onUpdate:modelValue":s[4]||(s[4]=o=>t.form.confirm_password=o),class:"form-control form-control-lg border-start-0",type:"password",placeholder:"Confirm your password",required:""},null,512),[[c,t.form.confirm_password]])])]),e("div",X,[e("button",{type:"submit",class:"btn btn-primary btn-lg",disabled:t.loading},[t.loading?(h(),g("span",z)):D("",!0),b(" "+N(t.loading?"Creating account...":"Create Account"),1)],8,Z)])],32),e("div",ss,[s[17]||(s[17]=e("p",{class:"text-muted mb-0"},"Already have an account?",-1)),f(d,{to:"/login",class:"btn btn-outline-primary mt-2"},{default:U(()=>s[16]||(s[16]=[b("Sign in")])),_:1})])])])])])]),f(m)])}const ns=P(T,[["render",es],["__scopeId","data-v-0d22044b"]]);export{ns as default};
