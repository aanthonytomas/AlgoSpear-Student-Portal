import{d as k,l as C,t as m,p as f,S as P,_ as b,c as l,e as a,a as r,f as n,b as B,o as c}from"./index-D7cRCgpj.js";import{S as H,f as V,s as $}from"./SectionArticleHeader-D82-ycnd.js";import{P as R,a as u,j as d}from"./ProgressBar-45K4eqnU.js";import{r as g}from"./randomNumber-C27Mv2PT.js";import{S as L,a as D}from"./SectionFooter-upHGNFKG.js";import{C as T}from"./Courses--5a67tDs.js";import{E}from"./ElemProgressbar-DxHRhbjo.js";import"./config-Cif4XynF.js";import"./fetchSingle-C22NpKvN.js";import"./format-CV38ky4f.js";import"./count-B2fEAVCc.js";import"./insertGetID-BAx1ISz1.js";import"./timer-OaxQmgbO.js";import"./fetchAll-BSL-E5rQ.js";const F=k({components:{SectionArticleHeader:H,ElemProgressbar:E,CourseList:T,SectionFooter:D,SectionHeader:L,ProgressBar:R},data(){return{reset:0,reset_unlock:0,loading:!1,user:{},list:[],article:{},articles_refid:{},articleRed:[],progress:0,completionAlertShown:!1}},methods:{async onView(t){this.loading=!0,await V(t==null?void 0:t.topic_refid).then(async e=>{this.loading=!1,e.length>0?($(),this.article=e[0],this.reset=g()):this.$toast.warning("No article found")})},async isArticleGroupDone(){await this.loadProgress(),this.reset_unlock=g(),this.progress===100&&!this.completionAlertShown&&this.showCompletionAlert()},async loadProgress(){var e;await u((e=this.user)==null?void 0:e.user_refid).then(async o=>{this.articleRed=o||[]});let t=0;await d().then(async o=>{o.forEach(i=>{this.articleRed.some(s=>(i==null?void 0:i.topic_refid)==(s==null?void 0:s.topic_refid))&&t++}),this.progress=Math.floor(t/o.length*100),this.progress===100&&!this.completionAlertShown&&this.showCompletionAlert()})},showCompletionAlert(){this.completionAlertShown=!0,P.fire({title:"Congratulations!",text:"You've unlocked the 'Data Structures' and 'Algorithms' topics. Ready to dive in and explore further?",icon:"success",showCancelButton:!0,cancelButtonColor:"#d33",confirmButtonText:"Yes, let's go!",cancelButtonText:"No, thanks!"}).then(t=>{t.isConfirmed&&this.$router.push("/readings")})}},async mounted(){this.loading=!0;const t=await C();t!=null&&t.user_refid?(this.user=t,await u(t==null?void 0:t.user_refid).then(async e=>{this.articleRed=e||[]}),await d().then(async e=>{var o,i;this.list=m(e),this.articles_refid=(o=this.list)==null?void 0:o.map(s=>s==null?void 0:s.topic_refid),Array.isArray(this.articleRed)&&(this.articleRed=(i=this.articleRed)==null?void 0:i.filter(s=>this.articles_refid.includes(s==null?void 0:s.topic_refid))),await this.loadProgress(),this.loading=!1,f("Data:",this.$data)})):(this.$toast.warning("Login to log reading history."),await d().then(async e=>{this.list=m(e),this.loading=!1,f("Data:",this.$data)}))}}),N={class:"main"},M={class:"container mt-5 py-5"},G={class:"row mt-5"},j={class:"col-lg-4 col-md-5 col-12 mb-4"},x={class:"col-lg-8 col-md-7 col-12"},O={class:"text-dark mt-5"},Y=["innerHTML"],z={key:1,class:"p-4"};function I(t,e,o,i,s,U){var h,p;const _=n("SectionHeader"),w=n("ElemProgressbar"),v=n("ProgressBar"),y=n("CourseList"),S=n("SectionArticleHeader"),A=n("SectionFooter");return c(),l("div",null,[a(_),r("main",N,[r("div",M,[e[2]||(e[2]=r("h1",{class:"text-center mt-5"},"Fundamental of Programming",-1)),r("div",G,[r("div",j,[a(w,{loading:t.loading},null,8,["loading"]),a(v,{height:40,percentage:t.progress},null,8,["percentage"]),a(y,{title:"Fundamental of Programming",btn_disabled:!1,list:t.list,articlesRead:t.articleRed,unlock:t.reset_unlock,onView:t.onView},null,8,["list","articlesRead","unlock","onView"])]),r("div",x,[a(S,{article:t.article,user:t.user,reset:t.reset,onCompleted:e[0]||(e[0]=q=>t.isArticleGroupDone())},null,8,["article","user","reset"]),r("div",O,[(h=t.article)!=null&&h.content?(c(),l("div",{key:0,innerHTML:(p=t.article)==null?void 0:p.content},null,8,Y)):(c(),l("div",z,e[1]||(e[1]=[B('<div class="card text-center"><div class="card-body"><h3 class="p-4" style="color:#a9a0a0;" id="selectreading"> Select reading material to start </h3><div class="d-flex justify-content-center pb-5"><svg xmlns="http://www.w3.org/2000/svg" width="60" height="60" fill="#a9a0a0" class="bi bi-bookmark-plus-fill" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M2 15.5V2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v13.5a.5.5 0 0 1-.74.439L8 13.069l-5.26 2.87A.5.5 0 0 1 2 15.5m6.5-11a.5.5 0 0 0-1 0V6H6a.5.5 0 0 0 0 1h1.5v1.5a.5.5 0 0 0 1 0V7H10a.5.5 0 0 0 0-1H8.5z"></path></svg></div></div></div>',1)])))])])])])]),a(A)])}const lt=b(F,[["render",I]]);export{lt as default};
