import{J as b,d as w,i as S,_ as h,c as d,e as i,a as s,f as a,m as y,v as u,y as _,K as v,n as E,k as P,g as c,j as C,w as A,o as m}from"./index-DvlkE_cf.js";import{S as I}from"./config-Cif4XynF.js";import{q as N}from"./fetchSingle-ri2_cx6-.js";import{S as M,a as V}from"./SectionFooter-TeUX6E9y.js";import"./format-CV38ky4f.js";function l(){return{NO_ACTIVE_USER:"No active user found",INC_EMAIL_PASS:"Incorrect email or password",REQ_EMAIL:"Email is required",REQ_PASS:"Password is required",DELETE_SUCCESS:"Deleted successfully"}}async function k({email:t,password:e}){return new Promise(async r=>{if(t=="")return r({success:!1,message:l().REQ_EMAIL});if(e=="")return r({success:!1,message:l().REQ_PASS});await N({connection:I().CONN_NPM_LMS,table:"users_student",where:[["email",t],["password",e]]}).then(async n=>n.length==0?r({success:!1,message:l().INC_EMAIL_PASS}):(b(n[0]),r({success:!0,message:"Authenticated"})))})}const L=w({name:"LoginPage",components:{SectionFooter:V,SectionHeader:M},data(){return{loading:!1,showPassword:!1,form:{email:"",password:""}}},methods:{togglePasswordVisibility(){this.showPassword=!this.showPassword},async login(){this.loading=!0;try{const t=await k(this.form);t.success?this.$router.replace("/"):this.$toast.warning((t==null?void 0:t.message)||"Login failed")}catch(t){this.$toast.error("An error occurred while signing in"),console.error(t)}finally{this.loading=!1}}},async mounted(){S()&&this.$router.replace("/")}}),$={class:"auth-wrapper"},q={class:"main mt-5"},D={class:"auth-container mt-5"},U={class:"card mt-5 border-0"},R={class:"card-body p-5"},F={class:"auth-form"},Q={class:"mb-4"},T={class:"input-group"},x={class:"mb-4"},B={class:"input-group"},H=["type"],O={class:"d-grid gap-2 mt-4"},j=["disabled"],z={key:0,class:"spinner-border spinner-border-sm me-2",role:"status"},J={class:"text-center mt-4"};function K(t,e,r,n,G,W){const p=a("SectionHeader"),g=a("router-link"),f=a("SectionFooter");return m(),d("div",$,[i(p),s("main",q,[s("div",D,[s("div",U,[s("div",R,[s("div",F,[e[10]||(e[10]=s("div",{class:"text-center mb-5"},[s("h1",{class:"display-6 fw-bold"},"AlgoSpear"),s("p",{class:"text-muted"},"Sign in to your account")],-1)),s("form",{onSubmit:e[3]||(e[3]=y((...o)=>t.login&&t.login(...o),["prevent"]))},[s("div",Q,[e[5]||(e[5]=s("label",{class:"form-label"},"Username",-1)),s("div",T,[e[4]||(e[4]=s("span",{class:"input-group-text bg-light border-end-0"},[s("i",{class:"bi bi-person"})],-1)),u(s("input",{"onUpdate:modelValue":e[0]||(e[0]=o=>t.form.email=o),class:"form-control form-control-lg border-start-0",type:"text",placeholder:"Enter your username",required:""},null,512),[[_,t.form.email]])])]),s("div",x,[e[7]||(e[7]=s("label",{class:"form-label"},"Password",-1)),s("div",B,[e[6]||(e[6]=s("span",{class:"input-group-text bg-light border-end-0"},[s("i",{class:"bi bi-lock"})],-1)),u(s("input",{"onUpdate:modelValue":e[1]||(e[1]=o=>t.form.password=o),class:"form-control form-control-lg border-start-0",type:t.showPassword?"text":"password",placeholder:"Enter your password",required:""},null,8,H),[[v,t.form.password]]),s("span",{class:"input-group-text bg-light cursor-pointer",onClick:e[2]||(e[2]=(...o)=>t.togglePasswordVisibility&&t.togglePasswordVisibility(...o))},[s("i",{class:E(t.showPassword?"bi bi-eye":"bi bi-eye-slash")},null,2)])])]),s("div",O,[s("button",{type:"submit",class:"btn btn-primary btn-lg",disabled:t.loading},[t.loading?(m(),d("span",z)):P("",!0),c(" "+C(t.loading?"Signing in...":"Sign In"),1)],8,j)])],32),s("div",J,[e[9]||(e[9]=s("p",{class:"text-muted mb-0"},"Don't have an account?",-1)),i(g,{to:"/sign-up",class:"btn btn-outline-primary mt-2"},{default:A(()=>e[8]||(e[8]=[c("Create an account")])),_:1})])])])])])]),i(f)])}const ts=h(L,[["render",K],["__scopeId","data-v-87f8f413"]]);export{ts as default};
