import{H as S,d as _,i as y,_ as h,c as d,e as a,a as s,f as i,I as w,s as c,v as u,k as v,g as m,j as E,w as A,o as p}from"./index-D7cRCgpj.js";import{S as C}from"./config-Cif4XynF.js";import{q as I}from"./fetchSingle-C22NpKvN.js";import{S as N,a as M}from"./SectionFooter-upHGNFKG.js";import"./format-CV38ky4f.js";function l(){return{NO_ACTIVE_USER:"No active user found",INC_EMAIL_PASS:"Incorrect email or password",REQ_EMAIL:"Email is required",REQ_PASS:"Password is required",DELETE_SUCCESS:"Deleted successfully"}}async function P({email:t,password:e}){return new Promise(async o=>{if(t=="")return o({success:!1,message:l().REQ_EMAIL});if(e=="")return o({success:!1,message:l().REQ_PASS});await I({connection:C().CONN_NPM_LMS,table:"users_student",where:[["email",t],["password",e]]}).then(async r=>r.length==0?o({success:!1,message:l().INC_EMAIL_PASS}):(S(r[0]),o({success:!0,message:"Authenticated"})))})}const L=_({name:"LoginPage",components:{SectionFooter:M,SectionHeader:N},data(){return{loading:!1,form:{email:"",password:""}}},methods:{async login(){this.loading=!0;try{const t=await P(this.form);t.success?this.$router.replace("/"):this.$toast.warning((t==null?void 0:t.message)||"Login failed")}catch(t){this.$toast.error("An error occurred while signing in"),console.error(t)}finally{this.loading=!1}}},async mounted(){y()&&this.$router.replace("/")}}),$={class:"auth-wrapper"},k={class:"main"},V={class:"auth-container"},q={class:"card mt-5 border-0"},x={class:"card-body p-5"},U={class:"auth-form"},D={class:"mb-4"},R={class:"input-group"},F={class:"mb-4"},H={class:"input-group"},Q={class:"d-grid gap-2 mt-4"},T=["disabled"],B={key:0,class:"spinner-border spinner-border-sm me-2",role:"status"},j={class:"text-center mt-4"};function O(t,e,o,r,z,G){const f=i("SectionHeader"),g=i("router-link"),b=i("SectionFooter");return p(),d("div",$,[a(f),s("main",k,[s("div",V,[s("div",q,[s("div",x,[s("div",U,[e[9]||(e[9]=s("div",{class:"text-center mb-5"},[s("h1",{class:"display-6 fw-bold"},"AlgoSpear"),s("p",{class:"text-muted"},"Sign in to your account")],-1)),s("form",{onSubmit:e[2]||(e[2]=w((...n)=>t.login&&t.login(...n),["prevent"]))},[s("div",D,[e[4]||(e[4]=s("label",{class:"form-label"},"Username",-1)),s("div",R,[e[3]||(e[3]=s("span",{class:"input-group-text bg-light border-end-0"},[s("i",{class:"bi bi-person"})],-1)),c(s("input",{"onUpdate:modelValue":e[0]||(e[0]=n=>t.form.email=n),class:"form-control form-control-lg border-start-0",type:"text",placeholder:"Enter your username",required:""},null,512),[[u,t.form.email]])])]),s("div",F,[e[6]||(e[6]=s("div",{class:"d-flex justify-content-between"},[s("label",{class:"form-label"},"Password")],-1)),s("div",H,[e[5]||(e[5]=s("span",{class:"input-group-text bg-light border-end-0"},[s("i",{class:"bi bi-lock"})],-1)),c(s("input",{"onUpdate:modelValue":e[1]||(e[1]=n=>t.form.password=n),class:"form-control form-control-lg border-start-0",type:"password",placeholder:"Enter your password",required:""},null,512),[[u,t.form.password]])])]),s("div",Q,[s("button",{type:"submit",class:"btn btn-primary btn-lg",disabled:t.loading},[t.loading?(p(),d("span",B)):v("",!0),m(" "+E(t.loading?"Signing in...":"Sign In"),1)],8,T)])],32),s("div",j,[e[8]||(e[8]=s("p",{class:"text-muted mb-0"},"Don't have an account?",-1)),a(g,{to:"/sign-up",class:"btn btn-outline-primary mt-2"},{default:A(()=>e[7]||(e[7]=[m("Create an account")])),_:1})])])])])])]),a(b)])}const Z=h(L,[["render",O],["__scopeId","data-v-7c6a2d06"]]);export{Z as default};
